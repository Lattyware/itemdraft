<!--
  A user logo for displaying draft order.
-->
<root>
	<styles>
		<include src="file://{resources}/styles/custom_game/draft/draft.css" />
	</styles>
  <script>
    "use strict";

    var panel = $.GetContextPanel();
    var order = panel.GetAttributeInt("order", -1);

    for (var keyValue of CustomNetTables.GetAllTableValues("draft")) {
      draftChange("draft", keyValue.key, keyValue.value);
    }

    function draftChange(table, key, value) {
      if (key === "draft") {
        var playerId = value["order"][order.toString()];
        if (playerId == undefined) {
          panel.AddClass("hidden");
          return;
        }
        var playerInfo = Game.GetPlayerInfo(playerId);
        var steamId = playerInfo["player_steamid"];
        panel.GetChild(0).steamid = steamId;
        panel.GetChild(1).steamid = steamId;
      }
    }

    CustomNetTables.SubscribeNetTableListener("draft", draftChange);
  </script>
  <Panel class="draft-order-player">
    <DOTAAvatarImage steamid="-1" />
    <DOTAUserName steamid="-1" />
  </Panel>
</root>
